#!/bin/bash

# Define the line to add
line_to_add="enforce_for_root"

# Check if the line already exists in the file
if grep -q "^$line_to_add" /etc/security/pwhistory.conf; then
  echo "The line '$line_to_add' already exists in /etc/security/pwhistory.conf."
else
  # Add the line to the file
  echo "$line_to_add" | sudo tee -a /etc/security/pwhistory.conf > /dev/null
  echo "The line '$line_to_add' has been added to /etc/security/pwhistory.conf."
fi

# Set the default inactive period for new users to 45 days
useradd -D -f 45

# Check if the command was successful
if [ $? -eq 0 ]; then
  echo "Default inactive period set to 45 days successfully."
else
  echo "Failed to set the default inactive period."
  exit 1
fi
